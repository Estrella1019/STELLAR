# ğŸš€ STELLAR + Ollama å¿«é€Ÿå¼€å§‹

## ä¸€è¡Œå‘½ä»¤å¯åŠ¨å®éªŒ

```bash
cd /Users/panjiaying/Documents/Projects/STELLAR && ./run_safety_local.sh
```

## å½“å‰é…ç½®æ¦‚è§ˆ

| ç»„ä»¶ | æ¨¡å‹ | è¯´æ˜ |
|------|------|------|
| ğŸ¯ è¢«æµ‹ç³»ç»Ÿ (SUT) | `deepseek-r1:7b` | è¢«æ”»å‡»çš„ç›®æ ‡ LLM |
| âš–ï¸ è£åˆ¤ (Judge) | `deepseek-r1:7b` | åˆ¤å®šæ”»å‡»æ˜¯å¦æˆåŠŸ |
| ğŸ“Š é€‚åº”åº¦ (Fitness) | `deepseek-r1:7b` | è¿ç»­è¯„åˆ† (0-1) |
| ğŸ”§ ç”Ÿæˆå™¨ (Generator) | `dolphin3:latest` | ç”Ÿæˆæ”»å‡»æµ‹è¯•ç”¨ä¾‹ |

## å®éªŒå‚æ•°

- â±ï¸ **è¿è¡Œæ—¶é—´**: 2å°æ—¶
- ğŸ‘¥ **ç§ç¾¤å¤§å°**: 20
- ğŸ”„ **ä»£æ•°**: 10
- ğŸ§¬ **ç®—æ³•**: NSGA-II (å¤šç›®æ ‡é—ä¼ ç®—æ³•)

## æŸ¥çœ‹ç»“æœ

```bash
# å®æ—¶ç›‘æ§
tail -f log.txt

# æŸ¥çœ‹å¤±è´¥ç‡
cat results/*/failures_over_time.csv

# æŸ¥çœ‹æˆåŠŸæ”»å‡»
cat results/*/critical_cases.csv
```

## éªŒè¯é…ç½®

```bash
# è¿è¡Œè¯Šæ–­è„šæœ¬
python test_ollama_setup.py

# é¢„æœŸè¾“å‡º
# âœ… é€šè¿‡: ç¯å¢ƒå˜é‡
# âœ… é€šè¿‡: Ollama è¿æ¥
# âœ… é€šè¿‡: æ¨¡å‹æ³¨å†Œ
# âœ… é€šè¿‡: æ¨¡å‹è°ƒç”¨
# âœ… é€šè¿‡: Judge æ¸…æ´—
# ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼
```

## å¸¸è§é—®é¢˜é€ŸæŸ¥

### Q: è¿è¡Œå¤ªæ…¢æ€ä¹ˆåŠï¼Ÿ
```bash
# å‡å°‘æ—¶é—´å’Œç§ç¾¤
python run_tests_safety.py \
    --sut "deepseek-r1:7b" \
    --generator "dolphin3" \
    --population_size 10 \
    --max_time "01:00:00"
```

### Q: å¦‚ä½•æ›´æ¢æ¨¡å‹ï¼Ÿ
```bash
# ç¼–è¾‘ .env æ–‡ä»¶
nano .env

# ä¿®æ”¹ä»¥ä¸‹è¡Œ
LLM_TYPE=qwen2.5:7b
JUDGE_MODEL=qwen2.5:7b
GENERATOR_MODEL=llama3.2:latest
```

### Q: Judge è§£æå¤±è´¥å¤ªå¤šï¼Ÿ
```bash
# æ£€æŸ¥ DeepSeek è¾“å‡ºæ ¼å¼
# åœ¨ examples/safety/eval.py æ·»åŠ è°ƒè¯•è¾“å‡º
print(f"[DEBUG] Raw: {response}")
print(f"[DEBUG] Cleaned: {clean_response}")
```

## æ–‡ä»¶ä½ç½®å¿«é€Ÿå‚è€ƒ

| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `.env` | ç¯å¢ƒå˜é‡é…ç½® |
| `llm/llms.py` | æ¨¡å‹æšä¸¾å®šä¹‰ |
| `llm/call_ollama.py` | Ollama è°ƒç”¨å‡½æ•° |
| `examples/safety/eval.py` | Judge è¯„ä¼°é€»è¾‘ |
| `run_safety_local.sh` | è¿è¡Œè„šæœ¬ |
| `test_ollama_setup.py` | è¯Šæ–­è„šæœ¬ |
| `results/` | å®éªŒç»“æœè¾“å‡º |
| `log.txt` | è¯¦ç»†æ—¥å¿— |

## æˆåŠŸæ ‡å¿—

å®éªŒæˆåŠŸè¿è¡Œæ—¶ï¼Œä½ ä¼šçœ‹åˆ°ï¼š
- âœ… æ—¥å¿—ä¸­å‡ºç° "Generation X/10" è¿›åº¦
- âœ… `results/` ç›®å½•ä¸‹ç”Ÿæˆæ—¶é—´æˆ³æ–‡ä»¶å¤¹
- âœ… `failures_over_time.csv` æ•°å­—é€æ¸å¢é•¿
- âœ… æ—  "Could not parse" é”™è¯¯ (æˆ–å¾ˆå°‘)

## é¢„æœŸè®ºæ–‡ç»“æœå¯¹æ¯”

æ ¹æ®è®ºæ–‡å›¾2 (SafeQA):
- **STELLAR** åº”è¯¥æ¯” Random Search å¤šå‘ç° **2-4å€** å¤±è´¥
- **STELLAR** åº”è¯¥æ¯” ASTRAL å¤šå‘ç° **1.5-2å€** å¤±è´¥
- DeepSeek-R1 (å°æ¨¡å‹) åº”è¯¥æœ‰æ›´é«˜çš„å¤±è´¥ç‡

## éœ€è¦å¸®åŠ©ï¼Ÿ

1. æŸ¥çœ‹å®Œæ•´æ–‡æ¡£: `é…ç½®å®Œæˆæ€»ç»“.md`
2. æŸ¥çœ‹è®¾ç½®æŒ‡å—: `OLLAMA_SETUP_README.md`
3. è¿è¡Œè¯Šæ–­: `python test_ollama_setup.py`
4. æ£€æŸ¥æ—¥å¿—: `tail -100 log.txt`

---

**ç¥å®éªŒæˆåŠŸï¼å¦‚æœ‰é—®é¢˜éšæ—¶æŸ¥é˜…æ–‡æ¡£ã€‚** ğŸ‰
